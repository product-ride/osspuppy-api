# Migration `20210128063026-add-owner-to-repo`

This migration has been generated by Ameer Jhan <ameerjhanprof@gmail.com> at 1/28/2021, 12:00:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."repositories.userId_name_unique"

ALTER TABLE "public"."repositories" ADD COLUMN "ownerOrOrg" text   NOT NULL 

CREATE UNIQUE INDEX "repositories.userId_name_ownerOrOrg_unique" ON "public"."repositories"("userId", "name", "ownerOrOrg")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210126135059-change-minamount-type..20210128063026-add-owner-to-repo
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -36,7 +36,8 @@
   tierId Int?
   tier Tier? @relation(fields: [tierId], references: [id])
   userId Int
   user User @relation(fields: [userId], references: [id])
-  @@unique([userId, name])
+  ownerOrOrg String
+  @@unique([userId, name, ownerOrOrg])
   @@index([userId, name])
 }
```


