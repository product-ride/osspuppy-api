# Migration `20210126121610-add-unique-constraints-to-repos`

This migration has been generated by Ameer Jhan <ameerjhanprof@gmail.com> at 1/26/2021, 5:46:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."repositories.name_index"

CREATE UNIQUE INDEX "repositories.userId_name_unique" ON "public"."repositories"("userId", "name")

CREATE INDEX "repositories.userId_name_index" ON "public"."repositories"("userId", "name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210126121205-add-index-to-repo..20210126121610-add-unique-constraints-to-repos
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -36,6 +36,7 @@
   tierId Int?
   tier Tier? @relation(fields: [tierId], references: [id])
   userId Int
   user User @relation(fields: [userId], references: [id])
-  @@index([name])
+  @@unique([userId, name])
+  @@index([userId, name])
 }
```


